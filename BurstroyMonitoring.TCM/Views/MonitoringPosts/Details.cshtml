@model BurstroyMonitoring.Data.Models.MonitoringPost

@{
    ViewData["Title"] = "–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –ø–æ—Å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞";
}

<div class="details-container">
    <h1 class="form-title">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –ø–æ—Å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h1>
    
    <div class="details-row">
        <div class="details-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</div>
        <div class="details-value">@Html.DisplayFor(model => model.Name)</div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–û–ø–∏—Å–∞–Ω–∏–µ</div>
        <div class="details-value">@Html.DisplayFor(model => model.Description)</div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</div>
        <div class="details-value">
            @if (Model.Longitude.HasValue && Model.Latitude.HasValue)
            {
                <span>@Model.Longitude.Value.ToString("F6"), @Model.Latitude.Value.ToString("F6")</span>
                <br />
                <small>
                    <a href="https://www.google.com/maps?q=@Model.Latitude.Value,@Model.Longitude.Value" 
                       target="_blank" style="color: var(--primary-color); text-decoration: none;">
                        üìç –û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps
                    </a>
                </small>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω—ã</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ü–æ—Å—Ç –º–æ–±–∏–ª—å–Ω—ã–π</div>
        <div class="details-value">
            @if (Model.IsMobile)
            {
                <span class="lozenge">–ú–æ–±–∏–ª—å–Ω—ã–π</span>
            }
            else
            {
                <span class="lozenge">–°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–π</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ê–∫—Ç–∏–≤–Ω—ã–π</div>
        <div class="details-value">
            @if (Model.IsActive)
            {
                <span class="lozenge lozenge--success">–ê–∫—Ç–∏–≤–µ–Ω</span>
            }
            else
            {
                <span class="lozenge lozenge--error">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–°–æ–∑–¥–∞–Ω</div>
        <div class="details-value">
            @if (Model.CreatedAt.HasValue)
            {
                <span>@Model.CreatedAt.Value.ToString("dd.MM.yyyy HH:mm")</span>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω–∞</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–û–±–Ω–æ–≤–ª–µ–Ω</div>
        <div class="details-value">
            @if (Model.UpdatedAt.HasValue)
            {
                <span>@Model.UpdatedAt.Value.ToString("dd.MM.yyyy HH:mm")</span>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω–∞</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞—Ç—á–∏–∫–æ–≤</div>
        <div class="details-value">
            @if (Model.Sensors != null && Model.Sensors.Any())
            {
                <span class="sensor-count">@Model.Sensors.Count</span>
                <a href="@Url.Action("Index", "Sensors", new { monitoringPostId = Model.Id })" 
                   class="view-sensors-link">
                    –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ
                </a>
                
                <!-- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ -->
                <div class="sensors-list">
                    <strong>–ê–∫—Ç–∏–≤–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏:</strong>
                    <ul>
                        @foreach (var sensor in Model.Sensors.Take(5))
                        {
                            <li>
                                <a href="@Url.Action("Details", "Sensors", new { id = sensor.Id })" 
                                   style="color: var(--primary-color); text-decoration: none;">
                                    @sensor.SerialNumber - @sensor.EndPointsName
                                </a>
                                @if (sensor.IsActive)
                                {
                                    <span class="lozenge lozenge--success" style="margin-left: 5px; font-size: 11px;">–ê–∫—Ç–∏–≤–µ–Ω</span>
                                }
                                else
                                {
                                    <span class="lozenge lozenge--error" style="margin-left: 5px; font-size: 11px;">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                                }
                            </li>
                        }
                        @if (Model.Sensors.Count > 5)
                        {
                            <li class="text-muted">
                                ... –∏ –µ—â–µ @(Model.Sensors.Count - 5) –¥–∞—Ç—á–∏–∫–æ–≤
                            </li>
                        }
                    </ul>
                </div>
            }
            else
            {
                <span class="text-muted">–ù–µ—Ç –¥–∞—Ç—á–∏–∫–æ–≤</span>
                <a href="@Url.Action("Create", "Sensors", new { monitoringPostId = Model.Id })" 
                   class="add-sensor-link">
                    –î–æ–±–∞–≤–∏—Ç—å –¥–∞—Ç—á–∏–∫
                </a>
            }
        </div>
    </div>
    
    <div class="details-actions">
        <a asp-action="Edit" asp-route-id="@Model.Id" class="button button--primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a asp-action="Delete" asp-route-id="@Model.Id" class="button button--danger">–£–¥–∞–ª–∏—Ç—å</a>
        <a asp-action="Index" class="button button--secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
    </div>
</div>