@model BurstroyMonitoring.Data.Models.Sensor

@{
    ViewData["Title"] = "–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –¥–∞—Ç—á–∏–∫–µ";
}

<div class="details-container">
    <h1 class="form-title">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –¥–∞—Ç—á–∏–∫–µ</h1>
    
    <div class="details-row">
        <div class="details-label">–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</div>
        <div class="details-value">@Html.DisplayFor(model => model.SerialNumber)</div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–¢–∏–ø –¥–∞—Ç—á–∏–∫–∞</div>
        <div class="details-value">
            @if (Model.SensorType != null)
            {
                <span>@Model.SensorType.SensorTypeName</span>
                <br />
                <small style="color: var(--text-secondary);">@Model.SensorType.Description</small>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ü–æ—Å—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</div>
        <div class="details-value">
            @if (Model.MonitoringPost != null)
            {
                <span>@Model.MonitoringPost.Name</span>
                @if (Model.MonitoringPost.IsMobile)
                {
                    <span class="lozenge" style="margin-left: 8px;">–ú–æ–±–∏–ª—å–Ω—ã–π</span>
                }
            }
            else
            {
                <span class="text-muted">–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</div>
        <div class="details-value">
            @if (Model.Longitude.HasValue && Model.Latitude.HasValue)
            {
                <span>@Model.Longitude.Value.ToString("F6"), @Model.Latitude.Value.ToString("F6")</span>
                <br />
                <small>
                    <a href="https://www.google.com/maps?q=@Model.Latitude.Value,@Model.Longitude.Value" 
                       target="_blank" style="color: var(--primary-color); text-decoration: none;">
                        üìç –û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps
                    </a>
                </small>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω—ã</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏</div>
        <div class="details-value">@Html.DisplayFor(model => model.EndPointsName)</div>
    </div>
    
    <div class="details-row">
        <div class="details-label">@Html.DisplayNameFor(model => model.Url)</div>
        <div class="details-value">
            <a href="@Model.Url" target="_blank" style="color: var(--primary-color); word-break: break-all;">
                @Model.Url
            </a>
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫)</div>
        <div class="details-value">
            @Html.DisplayFor(model => model.CheckIntervalSeconds) —Å–µ–∫—É–Ω–¥
            <small style="color: var(--text-secondary); margin-left: 8px;">
                (@(Model.CheckIntervalSeconds / 60) –º–∏–Ω—É—Ç)
            </small>
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
        <div class="details-value">
            @if (Model.LastActivityUTC.HasValue)
            {
                <span>@Model.LastActivityUTC.Value.ToString("dd.MM.yyyy HH:mm:ss") UTC</span>
                <br />
                <small style="color: var(--text-secondary);">
                    @{
                        var timeAgo = DateTime.UtcNow - Model.LastActivityUTC.Value;
                        if (timeAgo.TotalDays >= 1)
                        {
                            <span>@((int)timeAgo.TotalDays) –¥–Ω–µ–π –Ω–∞–∑–∞–¥</span>
                        }
                        else if (timeAgo.TotalHours >= 1)
                        {
                            <span>@((int)timeAgo.TotalHours) —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥</span>
                        }
                        else if (timeAgo.TotalMinutes >= 1)
                        {
                            <span>@((int)timeAgo.TotalMinutes) –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥</span>
                        }
                        else
                        {
                            <span>–¢–æ–ª—å–∫–æ —á—Ç–æ</span>
                        }
                    }
                </small>
            }
            else
            {
                <span class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–°–æ–∑–¥–∞–Ω</div>
        <div class="details-value">
            @if (Model.CreatedAt.HasValue)
            {
                <span>@Model.CreatedAt.Value.ToString("dd.MM.yyyy HH:mm:ss") UTC</span>
            }
            else
            {
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω–∞</span>
            }
        </div>
    </div>
    
    <div class="details-row">
        <div class="details-label">–°—Ç–∞—Ç—É—Å</div>
        <div class="details-value">
            @if (Model.IsActive)
            {
                <span class="lozenge lozenge--success">–ê–∫—Ç–∏–≤–µ–Ω</span>
            }
            else
            {
                <span class="lozenge lozenge--error">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
            }
        </div>
    </div>
    
    <div class="details-actions">
        <a asp-action="Edit" asp-route-id="@Model.Id" class="button button--primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a asp-action="Index" class="button button--secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
    </div>
</div>